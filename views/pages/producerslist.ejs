<html>

<head>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Country</th>
                <th scope="col">Year</th>
                <th scope="col"><a class="btn btn-primary" href="/newproducer" role="button">New producer</a></th>
            </tr>
        </thead>
        <tbody>
            <% allProducers.forEach(p =>{ %>
            <tr>
                <th scope="row"><%=p.id %></th>
                <td><a href="/producers/<%= p.id%>"><%=p.name %></a></td>
                <td><%=p.country %></td>
                <td><%=p.year %></td>
                <td><button type="button" id="<%= p.id%>" onclick="onDelete(event)"
                        class="btn btn-danger">Delete</button></td>
            </tr>
            <% }) %>
        </tbody>
    </table>
    <script>
        async function onDelete(event) {
            const _id = event.target.id
            const url = 'producers/remove/' + _id
            await axios.delete(url)
            location.reload()
        }
    </script>
</body>

</html>